# Task T-1.1.1: Project Scaffolding

## Meta
| Field | Value |
|-------|-------|
| Task ID | T-1.1.1 |
| Milestone | M1: Foundation |
| Module | M1-MOD1: Project Initialization |
| Priority | High |
| Effort | 3h |
| Estimated Tokens | 12K |
| Recommended Model | Sonnet |
| Dependencies | None |
| Parallel Group | PG-1 |
| AC Mapping | — |

## Objective
Create the foundational project structure for the ServiceNow MCP Bridge. This includes initializing `package.json` with all required dependencies, configuring TypeScript for strict ESM compilation, setting up vitest for testing, providing a `.env.example` for configuration reference, and establishing the `src/` directory layout that all subsequent tasks will build upon.

## Acceptance Criteria
- [ ] `package.json` exists with correct project metadata (name: `servicenow-mcp-bridge`, version: `0.1.0`, type: `module`)
- [ ] Dependencies installed: `@modelcontextprotocol/sdk` ^1.12.x, `zod` ^3.24.x, `pino` ^9.x
- [ ] Dev dependencies installed: `typescript` ^5.x, `vitest` ^3.x, `@types/node` ^20.x
- [ ] `tsconfig.json` configured with `strict: true`, `module: "ESNext"`, `target: "ES2022"`, `moduleResolution: "bundler"` or `"node16"`, `outDir: "./dist"`, `rootDir: "./src"`
- [ ] `vitest.config.ts` configured with TypeScript support and test file glob patterns
- [ ] `.env.example` contains documented placeholder entries for all expected environment variables (ServiceNow instance, auth type, credentials)
- [ ] Directory structure created under `src/`: `config/`, `auth/`, `client/`, `resilience/`, `errors/`, `logging/`, `modules/`
- [ ] `src/index.ts` exists as a placeholder entry point
- [ ] Project compiles with `npx tsc --noEmit` (zero errors)
- [ ] `npm test` runs vitest (even if no tests exist yet, the runner should execute cleanly)

## Technical Notes

### package.json
- Set `"type": "module"` for ESM support
- Set `"engines": { "node": ">=20.0.0" }` to enforce Node 20+ (required for native `fetch`)
- Add scripts: `"build"`, `"start"`, `"dev"`, `"test"`, `"typecheck"`
- `"main"` should point to `"dist/index.js"`

### tsconfig.json
- Use `"strict": true` (enables all strict type-checking options)
- Use `"target": "ES2022"` for modern runtime features
- Use `"module": "ESNext"` with `"moduleResolution": "bundler"` for ESM compatibility
- Enable `"declaration": true` and `"declarationMap": true` for type exports
- Enable `"sourceMap": true` for debugging
- Set `"skipLibCheck": true` to speed up compilation

### vitest.config.ts
- Use `defineConfig` from `vitest/config`
- Set test include patterns: `["tests/**/*.test.ts"]`
- Configure coverage if desired (optional for scaffolding)

### .env.example
Document all expected environment variables with comments:
```
# ServiceNow Instance Configuration
SERVICENOW_INSTANCE=your-instance-name
SERVICENOW_AUTH_TYPE=basic  # basic | oauth | token

# Basic Auth
SERVICENOW_USERNAME=
SERVICENOW_PASSWORD=

# OAuth 2.0 Client Credentials
SERVICENOW_CLIENT_ID=
SERVICENOW_CLIENT_SECRET=

# Bearer Token
SERVICENOW_TOKEN=
```

### Directory Structure
Create empty `index.ts` barrel files or `.gitkeep` files in each directory to establish the structure:
```
src/
  index.ts
  config/
  auth/
  client/
  resilience/
  errors/
  logging/
  modules/
```

### Key Decisions
- No `dotenv` dependency — config loader (T-1.1.2) will handle environment variable loading
- No linting setup in this task — can be added in M4 quality pass (T-4.3.2)
- Placeholder `src/index.ts` should contain a minimal `console.log` or be empty; real entry point is implemented in T-1.5.1

## Token Estimation Rationale
| Component | Tokens |
|-----------|--------|
| package.json generation | 2K |
| tsconfig.json configuration | 1K |
| vitest.config.ts setup | 1K |
| .env.example creation | 1K |
| Directory structure + placeholder files | 3K |
| Verification (compile check, test run) | 2K |
| Debugging buffer (20%) | 2K |
| **Total** | **12K** |
